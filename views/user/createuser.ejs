<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../layouts/head') %>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
  </head>

  <body class="hold-transition light-skin sidebar-mini theme-primary fixed">
    <div class="wrapper">
      <!-- <div id="loader"></div> -->

      <header class="main-header">
        <!-- header-->
        <%- include('../layouts/header') %>
      </header>

      <aside class="main-sidebar">
        <!-- sidebar-->
        <%- include('../layouts/aside') %>
      </aside>

      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <div class="container-full">
          <section class="content">
            <div class="col-6 col-xl-6">
              <div class="card p-20">
                <div class="card-header">
                  <h5 class="card-title"><%=title%></h5>
                </div>
                <form
                  class="rform__modified"
                  action="/user/users/register"
                  method="post"
                >
                  <div class="form-group">
                    <div class="input-group mb-3" id="type__error">
                      <span class="input-group-text bg-transparent">
                        <i class="text-fade ti-briefcase"></i>
                      </span>
                      <select
                        name="role"
                        class="form-control ps-15 bg-transparent"
                        id="role"
                      >
                        <option value="">Select Role</option>
                        <option value="admin">Admin</option>
                        <option value="business">Business</option>
                        <option value="moderator">Moderator</option>
                        <option value="personal">Personal</option>
                      </select>
                    </div>
                    <span class="error" id="typeError"></span>
                  </div>

                  <div class="form-group">
                    <div class="input-group mb-3" id="name__error">
                      <span class="input-group-text bg-transparent"
                        ><i class="text-fade ti-user"></i
                      ></span>
                      <input
                        type="text"
                        name="fullName"
                        class="form-control ps-15 bg-transparent"
                        placeholder="Full Name"
                        id="fullName"
                      />
                    </div>
                    <span class="error" id="nameError"></span>
                  </div>
                  <div class="form-group">
                    <div class="input-group mb-3" id="email__error">
                      <span class="input-group-text bg-transparent"
                        ><i class="text-fade ti-email"></i
                      ></span>
                      <input
                        type="email"
                        name="email"
                        class="form-control ps-15 bg-transparent"
                        placeholder="Email"
                        id="email"
                        required
                      />
                    </div>
                    <span class="error" id="emailError"></span>
                  </div>
                  <div class="form-group">
                    <div class="input-group mb-3" id="password__error">
                      <span class="input-group-text bg-transparent"
                        ><i class="text-fade ti-lock"></i
                      ></span>
                      <input
                        type="password"
                        class="form-control ps-15 bg-transparent"
                        placeholder="Password"
                        id="password"
                        name="password"
                        required
                      />
                      <i
                        class="password-toggle fas fa-eye-slash"
                        onclick="togglePasswordVisibility()"
                      ></i>
                    </div>
                    <span class="error" id="passwordError"></span>
                  </div>
                  <div class="form-group">
                    <div class="input-group mb-3" id="password__c__error">
                      <span class="input-group-text bg-transparent"
                        ><i class="text-fade ti-lock"></i
                      ></span>
                      <input
                        type="password"
                        class="form-control ps-15 bg-transparent"
                        placeholder="Retype Password"
                        id="passwordConfirm"
                        name="passwordConfirm"
                        required
                      />
                      <i
                        class="passwordConfirm-toggle fas fa-eye-slash"
                        onclick="togglePasswordVisibilityX()"
                      ></i>
                    </div>
                    <span class="error" id="passwordConfirmError"></span>
                  </div>
                  <div class="row">
                    <div class="col-12 text-center">
                      <button
                        type="submit"
                        class="waves-effect waves-light btn mb-5 bg-gradient-warning w-p100 mt-10"
                        onclick="validateForm(event)"
                      >
                        REGISTER
                      </button>
                    </div>
                    <!-- /.col -->
                  </div>
                </form>
              </div>
            </div>
          </section>
        </div>
      </div>
      <footer class="main-footer">
        <!-- footer-->
        <%- include('../layouts/footer') %>
      </footer>
      <!-- Side panel -->
      <!-- quick_user_toggle -->
      <div class="modal modal-right fade" id="quick_user_toggle" tabindex="-1">
        <!-- user profile -->
        <%- include('../layouts/right') %>
      </div>
      <!-- /quick_user_toggle -->

      <!-- Control Sidebar -->
      <%- include('../layouts/sidebar') %>
    </div>

    <!-- <%- include('../layouts/script') %> -->
    <script src="js/pages/data-table.js"></script>
    <!-- Vendor JS -->
    <script src="/js/registerval.js"></script>

    <!-- JavaScript code for deleting a portfolio -->
    <script>
      function deleteUser(userId) {
        if (confirm('Are you sure you want to delete this user?')) {
          fetch(`/user/${userId}`, {
            method: 'DELETE',
          })
            .then(response => response.json())
            .then(data => {
              alert(data.message);
              location.reload(); // Refresh the page after successful deletion
            })
            .catch(error => {
              console.error('Failed to delete user:', error);
              alert('Failed to delete user. Please try again.');
            });
        }
      }
    </script>
  </body>
</html>
