<!DOCTYPE html>
<html lang="en">
  <body class="hold-transition light-skin sidebar-mini theme-primary fixed">
    <div class="wrapper">
      <!-- <div id="loader"></div> -->

      <header class="main-header">
        <!-- header -->
        <%- include('../layouts/header') %>
        <style>
          /* Your custom CSS styles go here */

          /* Hide all steps by default */
          .step {
            display: none;
          }

          /* Show active step */
          .step.active {
            display: block;
          }

          .based__container {
            position: relative;
          }
          .header__top1,
          .header__top2,
          .header__top3,
          .header__top4 {
            position: absolute;
            border-radius: 5px;
            font-size: 14px;

            border-bottom: 2px solid #020080;
            /* background-color: #46bc5c; */
            display: block;
            width: 33%;
            color: #000000;
            top: 0px;
            padding: 15px 10px;
          }

          .header__topspan {
            border: 2px solid #020080;
            color: #040404;

            padding: 10px 17px;
            text-align: center;
            border: 70%;
          }
        </style>
      </header>

      <aside class="main-sidebar" style="border-right: 1px solid #cbcbcb">
        <!-- sidebar-->
        <%- include('../layouts/aside') %>
      </aside>

      <div
        class="content-wrapper bg-white"
        style="border-radius: 0; border-top: 1px solid #cbcbcb"
      >
        <div class="container mt-30">
          <img
            src="/images/header/kyc_update_Web.png"
            alt="referral"
            srcset=""
          />

          <!-- Four-Step Form -->
          <section class="content">
            <div class="col-xl-8 col-8">
              <div class="box based__container">
                <div class="box-body">
                  <form
                    action="/user/profile-verification"
                    enctype="multipart/form-data"
                    method="POST"
                     onsubmit="return validateStep(currentStep);"
                     
                  >
                    <!-- Step 1: Personal Information -->
                    <div class="step active" id="step1">
                      <h3 class="header__top1">
                        <span class="header__topspan">1</span> Personal
                        Information
                      </h3>
                    <section>
  <div class="form-group mt-60">
    <label for="firstName" class="form-label">First Name :</label>
    <input
      type="text"
      class="form-control"
      id="firstName"
      name="firstName"
      placeholder="First Name"
      required
    />
  </div>

  <div class="form-group">
    <label for="middleName" class="form-label">Middle Name :</label>
    <input
      type="text"
      class="form-control"
      id="middleName"
      name="middleName"
      placeholder="Middle Name"
      
    />
  </div>

  <div class="form-group">
    <label for="lastName" class="form-label">Last Name :</label>
    <input
      type="text"
      class="form-control"
      id="lastName"
      name="lastName"
      placeholder="Last Name"
      required
    />
  </div>

  <div class="form-group">
    <label for="gender" class="form-label">Gender :</label>

      <select  class="form-control select2 select2-hidden-accessible" id="gender" name="gender" style="width: 100%;" tabindex="-1" aria-hidden="true">
    
      <option value="" disabled selected >Select Gender</option>
      <option value="male">Male</option>
      <option value="female">Female</option>
      <option value="other">Other</option>
    </select>
  </div>

  <div class="form-group">
    <label for="phoneNumber" class="form-label">Phone Number :</label>
    <input
      type="tel"
      class="form-control"
      id="phoneNumber"
      name="phoneNumber"
      placeholder="Phone Number"
      required
    />
  </div>
</section>

                      <button
                        type="button"
                        onclick="nextStep(1)"
                        class="btn bg-gradient-info-dark"
                      >
                        Next
                      </button>
                    </div>

                    <!-- Step 2: Address Information -->
                    <div class="step" id="step2">
                      <h3 class="header__top2">
                        <span class="header__topspan">2</span> Address
                        Information
                      </h3>
                      <section>
                        <div class="form-group mt-60">
                          <label for="addressStreet" class="form-label"
                            >Address :</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="addressStreet"
                            name="addressStreet"
                            placeholder="Your Address"
                            required
                          />
                        </div>
                        <div class="form-group">
                          <label for="country" class="form-label">Country</label>
      <select  class="form-control select2 select2-hidden-accessible" id="country" name="country" style="width: 100%;" tabindex="-1" aria-hidden="true">
        <option value="" disabled selected> Select Country</option>
        <!-- JavaScript code to populate the options with all countries -->
      </select>
                        </div>
                        <div class="form-group">
                          <label for="addressState" class="form-label"
                            >State :</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="addressState"
                            name="addressState"
                            placeholder="Your State"
                            required
                          />
                        </div>

                        <div class="form-group">
                          <label for="addressCity" class="form-label"
                            >City :</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="addressCity"
                            name="addressCity"
                            placeholder="Your City"
                            required
                          />
                        </div>

                        <div class="form-group">
                          <label for="addressZipCode" class="form-label"
                            >Zip Code</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="addressZipCode"
                            name="addressZipCode"
                            placeholder="Zip code"
                            required
                          />
                        </div>
                      </section>
                      <button
                        type="button"
                        onclick="prevStep(2)"
                        class="btn bg-secondary"
                      >
                        Previous
                      </button>
                      <button
                        type="button"
                        onclick="nextStep(2)"
                        class="btn bg-gradient-info-dark"
                      >
                        Next
                      </button>
                    </div>

                    <!-- Step 3: ID Verification -->
                    <div class="step" id="step3">
                      <h3 class="header__top3">
                        <span class="header__topspan">3</span> Id Verification
                      </h3>
                      <section>
                        <div class="form-group mt-60">
                          <label for="idCardType" class="form-label"
                            >Select Identity type :</label
                          >
                            <select  class="form-control select2 select2-hidden-accessible" id="idCardType" name="idCardType" style="width: 100%;" tabindex="-1" aria-hidden="true">
                          
                            <option value="">Select Identity type</option>
                            <option value="National Identity Card">
                              National Identity Card
                            </option>
                            <option value="Drivers License">
                              Drivers License
                            </option>
                            <option value="Passport">Passport</option>
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="idCardNumber" class="form-label"
                            >Identity Number</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="idCardNumber"
                            name="idCardNumber"
                            placeholder="Identity Number"
                            required
                          />
                        </div>

                        <div class="form-group">
                          <label for="idCardImage" class="form-label"
                            >Upload Identity Image</label
                          >
                          <input
                            type="file"
                            class="form-control"
                            id="idCardImage"
                            
                            name="idCardImage"
                            accept="image/*,.pdf"
                         
                          />
                        </div>
                      </section>
                      <button
                        type="button"
                        onclick="prevStep(3)"
                        class="btn bg-secondary"
                      >
                        Previous
                      </button>
                      <button
                        type="button"
                        onclick="nextStep(3)"
                        class="btn bg-gradient-info-dark"
                      >
                        Next
                      </button>
                    </div>

                    <div class="step" id="step4">
                      <!-- Step 4: Proof of Address -->
                      <h3 class="header__top4">
                        <span class="header__topspan">4</span> Proof of Address (Optional)
                      </h3>
                      <section>
                        <div class="form-group mt-60">
                          <label for="proofType" class="form-label"
                            >Select Proof of Address :</label
                          >
                           <select  class="form-control select2 select2-hidden-accessible" id="proofType" name="proofType" style="width: 100%;" tabindex="-1" aria-hidden="true">
                            <option value="">Select Proof of Address</option>
                            <option value="Electricity bill">
                              Electricity bill
                            </option>
                            <option value="Water bill">Water bill</option>
                            <option value="Natural gas bill">
                              Natural gas bill
                            </option>
                            <option value="Telephone bill">
                              Telephone bill
                            </option>
                            <option value="Bank Statement">
                              Bank Statement
                            </option>
                          </select>
                        </div>

                        <div class="form-group">
                          <label for="proofImage" class="form-label"
                            >Upload Proof Address Image</label
                          >
                          <input
                            type="file"
                            class="form-control"
                            id="proofImage"
                            name="proofImage"
                            accept="image/*,.pdf"
                          />
                        </div>
                      </section>
                      <button
                        type="button"
                        onclick="prevStep(3)"
                        class="btn bg-secondary"
                      >
                        Previous
                      </button>
                     <button type="submit" class="btn bg-gradient-info-dark" id="submit-button">

  Submit
</button>

                    </div>
                  </form>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>

     <!-- ... (previous code) -->

<script>
  let currentStep = 1;

  function showStep(stepNumber) {
    const steps = document.getElementsByClassName('step');
    for (let i = 0; i < steps.length; i++) {
      if (i + 1 === stepNumber) {
        steps[i].classList.add('active');
      } else {
        steps[i].classList.remove('active');
      }
    }
  }

  function validateStep(stepNumber) {
    const step = document.querySelector(`#step${stepNumber}`);
    const requiredInputs = step.querySelectorAll('[required]');
    let isValid = true;

    requiredInputs.forEach(input => {
      const trimmedValue = input.value.trim();
      if (trimmedValue === '') {
        isValid = false;
        input.classList.add('is-invalid');
      } else {
        input.value = trimmedValue.toUpperCase(); // Convert to uppercase
        input.classList.remove('is-invalid');
      }
    });

    return isValid;
  }

  function nextStep(stepNumber) {
    if (validateStep(stepNumber)) {
      if (stepNumber < 4) {
        currentStep = stepNumber + 1;
        showStep(currentStep);
      }
    }
  }

  function prevStep(stepNumber) {
    if (stepNumber > 1) {
      currentStep = stepNumber - 1;
      showStep(currentStep);
    }
  }

  // Show the first step initially
  showStep(currentStep);

  async function fetchAllCountries() {
    try {
      const response = await fetch('https://restcountries.com/v2/all');
      const data = await response.json();
      return data;
    } catch (error) {
      console.error('Error fetching countries:', error);
      return [];
    }
  }

  // Function to populate the country select options
  async function populateCountrySelect() {
    const countrySelect = document.getElementById('country');
    const countries = await fetchAllCountries();

    countries.forEach(country => {
      const option = document.createElement('option');
      option.textContent = country.name;
      countrySelect.appendChild(option);
    });
  }

  // Call the function to populate the country select on page load
  window.addEventListener('load', populateCountrySelect);

  function formatPhoneNumber(input) {
    return input.replace(/\s/g, '');
  }

  // Event listener for the phone number input
  document.getElementById('phoneNumber').addEventListener('input', function () {
    this.value = formatPhoneNumber(this.value);
  });
  document.addEventListener("DOMContentLoaded", function() {
  const submitButton = document.getElementById("submit-button");
  const spinner = document.getElementById("spinner");

  submitButton.addEventListener("click", function() {
    spinner.style.display = "inline-block";
    // You can also disable the button to prevent further clicks
    submitButton.disabled = true;
  });
});

</script>

    </div>

    <footer class="main-footer bg-white">
      <%- include('../layouts/footer') %>
    </footer>
  </body>
</html>
